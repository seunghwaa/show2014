!function(a,b,c,d){function i(b,c){this.el=b,this.$el=a(b),this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.sections=this.$el.find(this.settings.sectionContainer),this.bodyElement=a(this.settings.bodyElement),this.paginationLinks=d,this.total=this.sections.length,this.topPos=0,this.lastAnimation=0,this.quietPeriod=100,this.paginationList="",this.checkPagesForEvents=!1,this.init()}a.fn.swipeEvents=function(){return this.each(function(){function e(a){var e=a.originalEvent.touches;e&&e.length&&(b=e[0].pageX,c=e[0].pageY,d.bind("touchmove",f)),a.preventDefault()}function f(a){var e=a.originalEvent.touches;if(e&&e.length){var g=b-e[0].pageX,h=c-e[0].pageY,i=50;g>=i&&d.trigger("swipeLeft"),-i>=g&&d.trigger("swipeRight"),h>=i&&d.trigger("swipeUp"),-i>=h&&d.trigger("swipeDown"),(Math.abs(g)>=i||Math.abs(h)>=i)&&d.unbind("touchmove",f)}a.preventDefault()}var b,c,d=a(this);d.bind("touchstart",e)})};var e={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return!this.isFunction(a)&&!this.isArray(a)&&a===Object(a)},isFunction:function(a){return"function"==typeof a},isString:function(a){return"string"==typeof a||a instanceof String}},f="onepage_scroll_extended",g={sectionContainer:"section",easing:"ease",animationTime:1e3,pagination:!0,paginationContainer:"body",updateURL:!1,touchEnabled:!0,mousewheelEnabled:!0,keyboard:!0,beforeMove:null,afterMove:null,loop:!1,useCssTransitions:!0,bodyElement:"body",pagesEvents:{}},h={selector:d,scrollDown:null,scrollUp:null,onlyOnScroll:!1,isGlobal:!1};i.prototype={init:function(){this.checkAndParseEvents(),this.bindEvents(),this.initTransformPage(),this.initMovement(),this.initSections(),this.initPagination(),this.displayCorrectPage(),this.initTouchSupport(),this.initMouseWheel(),this.initKeyboard()},checkAndParseEvents:function(){this.settings.pagesEvents&&(this.checkPagesForEvents=!0,this.parseEvents(this.settings.pagesEvents))},bindEvents:function(){var a=this;this.$el.bind("beforeMove",function(b,c,d){a.settings.pagination===!0&&a.updatePagination(d),a.updateBodyClass(d),a.updateHash(d),e.isFunction(a.settings.beforeMove)&&a.settings.beforeMove(c,d)}),this.$el.bind("afterMove",function(b,c,d){e.isFunction(a.settings.afterMove)&&a.settings.afterMove(c,d)})},initTransformPage:function(){var b=this;a.fn.transformPage=function(a,c,d){b.$el.trigger("beforeMove",[c,d]),Modernizr.csstransitions&&b.settings.useCssTransitions?b.$el.css({"-webkit-transform":"translate3d(0, "+a+"%, 0)","-webkit-transition":"all "+b.settings.animationTime+"ms "+b.settings.easing,"-moz-transform":"translate3d(0, "+a+"%, 0)","-moz-transition":"all "+b.settings.animationTime+"ms "+b.settings.easing,"-ms-transform":"translate3d(0, "+a+"%, 0)","-ms-transition":"all "+b.settings.animationTime+"ms "+b.settings.easing,transform:"translate3d(0, "+a+"%, 0)",transition:"all "+b.settings.animationTime+"ms "+b.settings.easing}).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){b.$el.trigger("afterMove",[c,d])}):b.$el.animate({top:a+"%"},b.settings.animationTime,"swing",function(){b.$el.trigger("afterMove",[c,d])})}},initMovement:function(){var b=this;a.fn.moveTo=function(a){var c,d,e,f;c=b.getCurrentIndex(),isNaN(c)&&(c=1),c!==a&&(b.settings.loop===!0&&(a=(a-1+b.total)%b.total+1),e=b.getSection(a),e.length&&(f=100*(1-a),d=b.getCurrent(),d.removeClass("active"),e.addClass("active"),b.$el.transformPage(f,c,a)))},a.fn.move=function(a){var c=b.sections.filter(".active").data("index");"up"===a?c-=1:c+=1,b.$el.moveTo(c)},a.fn.moveDown=function(){var a=b.getCurrent();if(!b.checkPagesForEvents||0==a.length||!a.data("OnePageScrollEvents"))return b.$el.move("down"),void 0;var c=a.data("OnePageScrollEvents"),d=a.data("OnePageScrollIndex");return d=0>d?0:d,d>=c.length?(b.$el.move("down"),void 0):(b.parseAndExecuteDown(a,c[d]),d++,a.data("OnePageScrollIndex",d),void 0)},a.fn.moveUp=function(){var a=b.getCurrent();if(!b.checkPagesForEvents||0==a.length||!a.data("OnePageScrollEvents"))return b.$el.move("up"),void 0;var c=a.data("OnePageScrollEvents"),d=a.data("OnePageScrollIndex");return d--,0>d?(b.$el.move("up"),void 0):(b.parseAndExecuteUp(a,c[d]),a.data("OnePageScrollIndex",d),void 0)}},initSections:function(){this.$el.addClass("onepage-wrapper").css("position","relative");var b=this;a.each(this.sections,function(c){a(this).css({position:"absolute",top:b.topPos+"%"}).addClass("section").attr("data-index",c+1),b.topPos=b.topPos+100,b.settings.pagination===!0&&(paginationText=a(this).data("pagination-text"),paginationText||(paginationText=""),b.paginationList+="<li><a data-index='"+(c+1)+"' href='#"+(c+1)+"'>"+paginationText+"</a></li>")})},initPagination:function(){if(this.settings.pagination===!0){a("<ul class='onepage-pagination'>"+this.paginationList+"</ul>").prependTo(this.settings.paginationContainer);var b=-1*(this.$el.find(".onepage-pagination").height()/2);this.$el.find(".onepage-pagination").css("margin-top",b),this.paginationLinks=a(".onepage-pagination li a");var c=this;this.paginationLinks.click(function(b){var d=a(this).data("index");a(this).hasClass("active")||(c.$el.moveTo(d),c.updatePagesEvents(d)),c.settings.updateURL===!1&&b.preventDefault()})}},displayCorrectPage:function(){if(""!==b.location.hash&&"#1"!==b.location.hash){var a=b.location.hash.replace("#","");isNaN(a)&&(a=1);var c=this.sections.filter("[data-index='"+a+"']");c&&this.updateHash(a),this.$el.moveTo(a),this.updatePagesEvents(a)}else this.getSection(1).addClass("active"),this.updateBodyClass(1),this.settings.pagination===!0&&this.updatePagination(1)},initTouchSupport:function(){if(this.settings.touchEnabled===!0){var a=this;this.$el.swipeEvents().bind("swipeDown",function(){a.$el.moveUp()}).bind("swipeUp",function(){a.$el.moveDown()})}},initMouseWheel:function(){if(this.settings.mousewheelEnabled===!0){var a=this;this.$el.bind("mousewheel DOMMouseScroll",function(b){if("SELECT"!==b.target.tagName){b.preventDefault();var c=b.originalEvent.wheelDelta||-b.originalEvent.detail;a.init_scroll(b,c)}})}},initKeyboard:function(){if(this.settings.keyboard===!0){var c=this;a(b.document).keydown(function(a){var b=a.target.tagName.toLowerCase();switch(a.which){case 38:"input"!==b&&"textarea"!==b&&c.$el.moveUp();break;case 40:"input"!==b&&"textarea"!==b&&c.$el.moveDown();break;default:return}a.preventDefault()})}},init_scroll:function(a,b){var c=b,d=(new Date).getTime();return d-this.lastAnimation<this.quietPeriod+this.settings.animationTime?(a.preventDefault(),void 0):(0>c?this.$el.moveDown():this.$el.moveUp(),this.lastAnimation=d,void 0)},updatePagination:function(a){this.paginationLinks.removeClass("active").filter("[data-index='"+a+"']").addClass("active")},updateBodyClass:function(a){this.bodyElement[0].className=this.bodyElement[0].className.replace(/\bviewing-page-\d.*?\b/g,""),this.bodyElement.addClass("viewing-page-"+a)},updateHash:function(a){if(b.history.replaceState&&this.settings.updateURL===!0){var c=b.location.href.substr(0,b.location.href.indexOf("#"))+"#"+a;b.history.replaceState({},b.document.title,c)}},getCurrentIndex:function(){return this.sections.filter(".active").data("index")},getCurrent:function(){return this.sections.filter(".active")},getSection:function(a){return this.sections.filter("[data-index='"+a+"']")},parseEvents:function(b){if(!e.isObject(b))return this.checkPagesForEvents=!1,void 0;var c=this;a.each(b,function(b,d){if(0!=c.$el.find(b).length){var f=c.$el.find(b);e.isObject(d)?c.addObjectToPage(f,d):e.isArray(d)&&a.each(d,function(a,b){c.addObjectToPage(f,b)})}})},addObjectToPage:function(b,c){if(e.isObject(c)){c=a.extend({},h,c);var d=[];b.data("OnePageScrollEvents")&&(d=b.data("OnePageScrollEvents")),d.push(c),b.data("OnePageScrollEvents",d),b.data("OnePageScrollIndex",-1)}},updatePagesEvents:function(a){this.executeAllDownTo(a),this.executeAllUpTo(a)},executeAllDownTo:function(a){if(this.checkPagesForEvents&&!isNaN(a))for(var b=this,c=1;a>c;c++){var e=this.getSection(c),f=e.data("OnePageScrollEvents");if(f){var g=e.data("OnePageScrollIndex");g=typeof g==d||0>g?0:g;for(var h=g;h<f.length;h++)f[h].onlyOnScroll||b.parseAndExecuteDown(e,f[h]),g++;e.data("OnePageScrollIndex",g)}}},executeAllUpTo:function(a){if(this.checkPagesForEvents&&!isNaN(a))for(var b=this,c=this.total,e=c;e>a;e--){var f=this.getSection(e),g=f.data("OnePageScrollEvents");if(g){var h=f.data("OnePageScrollIndex");if(h=typeof h==d||h>=g.length?g.length-1:h,g){for(var i=h;i>=0;i--)g[i].onlyOnScroll||b.parseAndExecuteUp(f,g[i]),h--;f.data("OnePageScrollIndex",h)}}}},parseAndExecuteDown:function(a,b){var c=null;return b.scrollDown?(b.selector&&(c=b.isGlobal?this.$el.find(b.selector):a.find(b.selector)),this.parseAndExecute(c,b.scrollDown,a),!0):!1},parseAndExecuteUp:function(a,b){var c=null;return b.scrollUp?(b.selector&&(c=b.isGlobal?this.$el.find(b.selector):a.find(b.selector)),this.parseAndExecute(c,b.scrollUp,a),!0):!1},parseAndExecute:function(a,b,c){var d=a,f=!0;if(a||(d=c,f=!1),e.isString(b)){if(!f)return;e.isFunction(d[b])&&d[b]()}else if(e.isObject(b)){if(!f)return;if(b.action){var g=[];b.args&&(g=b.args),e.isFunction(d[b.action])&&d[b.action].apply(d,g)}}else e.isFunction(b)&&b.call(d)}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new i(this,b))})}}(jQuery,window,document);